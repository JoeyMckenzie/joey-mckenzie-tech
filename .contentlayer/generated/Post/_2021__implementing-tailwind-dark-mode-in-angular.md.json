{
  "title": "Implementing dark mode in Angular with Tailwind",
  "description": "Because light mode is so 2018.",
  "pubDate": "2021-09-23T07:00:00.000Z",
  "category": "angular",
  "heroImage": "/images/tailwind-dark-mode/tailwind-dark-mode-meme.jpg",
  "draft": false,
  "keywords": [
    "angular",
    "dark mode"
  ],
  "body": {
    "raw": "\nAdmittedly, I'm a dark mode junkie - any app or website I stumble upon, the first thing I look for is the dark mode\nswitch. Wanting to bring that experience to my own applications, I've recently began dark mode-ing all the things\nusing [Tailwind](https://tailwindcss.com/docs/dark-mode) to dark mode-ify my Angular and React apps. In an effort to\nblog a bit more on my behalf in more bite size chunks, let's take a stab at setting up dark mode in an Angular\napplication using Tailwind!\n\n## Setting up Tailwind\n\nIf you're unfamiliar with Tailwind,\nI've [recently written](/<https://joeymckenzie.tech/blog/build-a-tailwind-modal-with-ngrx/)> a bit about what it is and\nwhy I love utilizing it any chance I get in a new project. To get started, let's bootstrap an Angular application and\nget into some code. In the [example app](https://github.com/JoeyMckenzie/joey-mckenzie-io-blog-samples) I'll use as a\nreference, I'm bootstrapping my project using [Nx](https://nx.dev/) (a blog topic for another day). With our project\nscaffolded out, let's go ahead and add Tailwind. Assuming you're using at least Angular v11.2, adding Tailwind to an\nexisting Angular project is easy as pie:\n\n1. Add Tailwind as a dev package dependency with:\n\n```shell\nnpm install --save-dev tailwindcss\n```\n\n2. With Tailwind installed, let's add the Tailwind styles to our project by referencing Tailwind's custom CSS directives\n   that will be swapped out at build time (thanks to native PostCSS support in Angular v11.2+). In our `styles.css`\n   file, let's add the following:\n\n#### styles.css\n\n```csharp\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\nAnd if you're using SCSS:\n\n#### styles.scss\n\n```csharp\n@import 'tailwind/base';\n@import 'tailwind/components';\n@import 'tailwind/utilities';\n```\n\n3. With our styles added, let's add a bare bones `tailwind.config.js` file at the root of our project that will serve to\n   help us configure Tailwind in our project:\n\n#### tailwind.config.js\n\n```js\nmodule.exports = {\n    darkMode: 'class', // or 'media' or 'class'\n};\n```\n\nThere are a plethora of configuration options that Tailwind offers to further customize how you're using it within a\nproject (production build optimization, extending themes, adding custom fonts and colors, etc.), but for our purpose, we\nonly care about telling Tailwind that we'll be using dark mode in our application.\n\nIn the above configuration, by telling Tailwind to use the option `darkMode: 'class'`, we're telling the library to\napply dark mode variants when it detects the `dark` class utility in the class list at some node near the root of the\nDOM tree (in our case, either the `body` or `html` tag). Our approach to adding a dark mode toggle will then involve\nwriting the code to dynamically update/remove this `dark` class utility from the class list on the `html` tag as we\nclick the toggle switch that initiates flipping between dark/light mode.\n\nYou can see this in action here on the blog by opening up your browser's developer tools and inspecting the DOM. Looking\nat the `html` tag, you'll notice the `dark` class being added, then removed, when you toggle the dark mode switch in the\nnavbar.\n\nWith our Tailwind setup ceremony out of the way, let's start dark mode-ifying our application.\n\n## Adding a dark mode service\n\nTo help us facilitate toggling dark mode in our application, let's add an injectable singleton service that will be\nresponsible for enabling/disabling dark mode styles in our markup. Let's run the service schematic to generate said\nservice:\n\n```shell\nng g service services/dark-mode\n```\n\nWith our `dark-mode.service.ts` scaffolded out for us, let's go ahead and add some code to allow us to perform the\nnecessary DOM updates that Tailwind looks for when determining which style variants to apply:\n\n#### dark-mode.service.ts\n\n```ts\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nconst DARK_MODE_ENABLED_KEY = 'darkModeEnabled';\nconst ENABLED_VALUE = 'true';\nconst NOT_ENABLED_VALUE = 'false';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class DarkModeService implements OnDestroy {\n    darkModeEnabled$ = new BehaviorSubject(false);\n\n    constructor() {\n        this.setCurrentState();\n        this.updateLocalStorageOnStateChange();\n    }\n\n    ngOnDestroy(): void {\n        this.darkModeEnabled$.complete();\n    }\n\n    toggleDarkMode(): void {\n        const currentValue = this.darkModeEnabled$.value;\n        this.darkModeEnabled$.next(!currentValue);\n    }\n\n    private setCurrentState(): void {\n        const currentValue = localStorage.getItem(DARK_MODE_ENABLED_KEY);\n        const htmlTag = document.getElementsByTagName('html').item(0);\n        const classList = htmlTag?.classList;\n\n        if (currentValue === ENABLED_VALUE) {\n            this.darkModeEnabled$.next(true);\n            classList?.add('dark');\n        } else if (currentValue === NOT_ENABLED_VALUE) {\n            this.darkModeEnabled$.next(false);\n            classList?.remove('dark');\n        }\n    }\n\n    private updateLocalStorageOnStateChange(): void {\n        this.darkModeEnabled$.subscribe((enabled) => {\n            const htmlTag = document.getElementsByTagName('html').item(0);\n            const classList = htmlTag?.classList;\n\n            if (enabled) {\n                localStorage.setItem(DARK_MODE_ENABLED_KEY, 'true');\n                classList?.add('dark');\n            } else {\n                localStorage.setItem(DARK_MODE_ENABLED_KEY, 'false');\n                classList?.remove('dark');\n            }\n        });\n    }\n}\n```\n\nLet's break down the code above so we can get a better understanding of what this service is doing:\n\n1. We expose a `BehaviorSubject` that serves as the source of truth holding the current state value determining if our\n   application is in dark mode. We could also hold this information in a more formalized stateful manner using a library\n   like [NgRx](https://ngrx.io/), but a simple `BehaviorSubject` does the job for us here. For the purpose of this post,\n   we won't be doing anything with this information, but it might be useful if we need to do some dark mode specific\n   logic later on.\n\n2. Next, we construct our service by having it call two methods: `setCurrentState`\n   and `updateLocalStorageOnStateChange`. Looking at the first method:\n\n#### setCurrentState()\n\n```ts\nprivate setCurrentState(): void {\n  const currentValue = localStorage.getItem(DARK_MODE_ENABLED_KEY);\n  const htmlTag = document.getElementsByTagName('html').item(0);\n  const classList = htmlTag?.classList;\n\n  if (currentValue === ENABLED_VALUE) {\n    this.darkModeEnabled$.next(true);\n    classList?.add('dark');\n  } else if (currentValue === NOT_ENABLED_VALUE) {\n    this.darkModeEnabled$.next(false);\n    classList?.remove('dark');\n  }\n}\n```\n\n`setCurrentState` is responsible for reading the current dark mode value stored in local storage, either `true`\nor `false` identified by the `darkModeEnabled` key. Once it's value is read, we apply the correct class to the `html`\ntag depending on what the value is, either adding `dark` to the class list or removing it. We store the dark mode value\nin local storage to provide a bit of nice UX for our users so that when they refresh the page, or come back to site\nlater, their dark mode option they previously selected is persisted.\n\nAgain, if you take a look at your browser's current local storage here on the blog, you'll see the `darkModeEnabled`\noption with your current selection. Refreshing the page will reapply which option you currently have selected. Neat!\n\nLooking at our second method, `updateLocalStorageOnStateChange`, let's break it down:\n\n#### updateLocalStorageOnStateChange()\n\n```ts\nprivate updateLocalStorageOnStateChange(): void {\n  this.darkModeEnabled$.subscribe((enabled) => {\n    const htmlTag = document.getElementsByTagName('html').item(0);\n    const classList = htmlTag?.classList;\n\n    if (enabled) {\n      localStorage.setItem(DARK_MODE_ENABLED_KEY, 'true');\n      classList?.add('dark');\n    } else {\n      localStorage.setItem(DARK_MODE_ENABLED_KEY, 'false');\n      classList?.remove('dark');\n    }\n  });\n}\n```\n\n`updateLocalStorageOnStateChange()`'s job is to observe and react to changes from our `darkModeEnabled$` subject and\ncorrectly apply the proper class - either adding `dark` or removing it from the class list of the `html` tag.\n\n3. We've registered a listener on our `darkModeEnabled$` subject, so we best do our developer duty by disposing of the\n   listener once this service is destroyed in the `ngOnDestroy()` lifecycle hook (it's a singleton, so it'll only be\n   called on application destruction):\n\n#### ngOnDestroy()\n\n```ts\nngOnDestroy(): void {\n  this.darkModeEnabled$.complete();\n}\n```\n\n4. Lastly, we add an expose a `toggleDarkMode()` method that, when called, simply flips the dark mode enabled value.\n\n## Using our dark mode service in a component\n\nWith the heavy lifting of applying/removing dark mode in our application out of the way, let's go ahead and create a\nsimple component with just a single Tailwind-styled button. Let's run the following schematic:\n\n```shell\nng g component components/theme-toggle\n```\n\nOnce our component has been created, let's remove the `theme-toggle.component.css` file as we won't be needing any\ncustom CSS as Tailwind provides just about everything we need in terms of CSS utilities.\n\nIn our `theme-toggle.component.ts`, let's update the component with a bit of code to bring in our dark mode service and\nsetup a click handler to toggle setting dark mode on our markup:\n\n#### theme-toggle.component.ts\n\n```ts\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { DarkModeService } from '../../services/dark-mode/dark-mode.service';\n\n@Component({\n    selector: 'joey-mckenzie-io-images-samples-theme-toggle',\n    templateUrl: './theme-toggle.component.html',\n})\nexport class ThemeToggleComponent {\n    darkModeEnabled$ = this.darkModeService.darkModeEnabled$;\n\n    constructor(private darkModeService: DarkModeService) {}\n\n    toggleDarkMode(): void {\n        this.darkModeService.toggleDarkMode();\n    }\n}\n```\n\nOur component code exposes a single method to interact with our dark mode service from the template. With our component\ncode in place, let's add some simple markup with just a single button that will handle toggling modes:\n\n#### theme-toggle.component.html\n\n```html\n<div class=\"flex min-h-screen flex-col items-center justify-center gap-y-4\">\n    <button\n        (click)=\"toggleDarkMode()\"\n        id=\"dark-mode-toggle\"\n        class=\"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700 dark:bg-blue-800 dark:text-blue-400 dark:hover:bg-blue-900\"\n    >\n        Toggle\n    </button>\n    <p class=\"text-black dark:text-white\">\n        Dark mode enabled: {{ (darkModeEnabled$ | async) === true }}\n    </p>\n</div>\n```\n\nWith the markup above, all we should see now when we run our application is a single button in the middle of the page (\nmake sure you add our component selector to `app.component.html`).\n\nIn our class list, you'll notice a few classes prefixed with `dark:`. This is how we tell Tailwind to apply the dark\nmode class variant when it detects `dark` in the class list higher up the DOM chain. We can also apply dark mode\nvariants to pseudo-selectors as well as we see with the dark mode variant on our `hover:` selector. Pretty cool!\n\nOne last change we'll make is in our `index.html` root markup file to apply background colors as we toggle modes:\n\n#### index.html\n\n```html\n<!doctype html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>TailwindDarkMode</title>\n        <base href=\"/\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\" />\n    </head>\n\n    <body class=\"bg-white dark:bg-black\">\n        <joey-mckenzie-io-blog-samples-root></joey-mckenzie-io-blog-samples-root>\n    </body>\n</html>\n```\n\nIn our `body` tag, we add some background colors corresponding to which mode we're currently in. With everything\nstrapped together, if we fire up our application and navigate to `localhost:4200`, we'll be able to see our masterpiece\nin action:\n\n[Tailwind dark mode toggle example](/images/tailwind-dark-mode/dark-mode-toggle.webm)\n\nWith dev tools open, you'll see the class list on the `html` tag update each time we click the button, as well as seeing\nthe value updated in local storage. If we refresh the page as well, we'll keep our dark mode in tact if we have that\noption selected before reloading!\n\nAs always, take a look at\nthe [example code](https://github.com/JoeyMckenzie/joey-mckenzie-io-blog-samples/tree/main/apps/tailwind-dark-mode) for\nreference and let me know if you have any suggestions for a different implementation.\n\nHappy dark mode-ing, friends!\n",
    "html": "<p>Admittedly, I'm a dark mode junkie - any app or website I stumble upon, the first thing I look for is the dark mode\nswitch. Wanting to bring that experience to my own applications, I've recently began dark mode-ing all the things\nusing <a href=\"https://tailwindcss.com/docs/dark-mode\">Tailwind</a> to dark mode-ify my Angular and React apps. In an effort to\nblog a bit more on my behalf in more bite size chunks, let's take a stab at setting up dark mode in an Angular\napplication using Tailwind!</p>\n<h2>Setting up Tailwind</h2>\n<p>If you're unfamiliar with Tailwind,\nI've <a href=\"/%3Chttps://joeymckenzie.tech/blog/build-a-tailwind-modal-with-ngrx/\">recently written</a>> a bit about what it is and\nwhy I love utilizing it any chance I get in a new project. To get started, let's bootstrap an Angular application and\nget into some code. In the <a href=\"https://github.com/JoeyMckenzie/joey-mckenzie-io-blog-samples\">example app</a> I'll use as a\nreference, I'm bootstrapping my project using <a href=\"https://nx.dev/\">Nx</a> (a blog topic for another day). With our project\nscaffolded out, let's go ahead and add Tailwind. Assuming you're using at least Angular v11.2, adding Tailwind to an\nexisting Angular project is easy as pie:</p>\n<ol>\n<li>Add Tailwind as a dev package dependency with:</li>\n</ol>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"shell\" data-theme=\"github-dark\"><code data-language=\"shell\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B392F0\">npm</span><span style=\"color:#9ECBFF\"> install</span><span style=\"color:#79B8FF\"> --save-dev</span><span style=\"color:#9ECBFF\"> tailwindcss</span></span></code></pre></figure>\n<ol start=\"2\">\n<li>With Tailwind installed, let's add the Tailwind styles to our project by referencing Tailwind's custom CSS directives\nthat will be swapped out at build time (thanks to native PostCSS support in Angular v11.2+). In our <code>styles.css</code>\nfile, let's add the following:</li>\n</ol>\n<h4>styles.css</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"csharp\" data-theme=\"github-dark\"><code data-language=\"csharp\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B392F0\">@tailwind</span><span style=\"color:#B392F0\"> base</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#B392F0\">@tailwind</span><span style=\"color:#B392F0\"> components</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#B392F0\">@tailwind</span><span style=\"color:#B392F0\"> utilities</span><span style=\"color:#E1E4E8\">;</span></span></code></pre></figure>\n<p>And if you're using SCSS:</p>\n<h4>styles.scss</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"csharp\" data-theme=\"github-dark\"><code data-language=\"csharp\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#E1E4E8\">@import </span><span style=\"color:#9ECBFF\">'tailwind/base'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">@import </span><span style=\"color:#9ECBFF\">'tailwind/components'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">@import </span><span style=\"color:#9ECBFF\">'tailwind/utilities'</span><span style=\"color:#E1E4E8\">;</span></span></code></pre></figure>\n<ol start=\"3\">\n<li>With our styles added, let's add a bare bones <code>tailwind.config.js</code> file at the root of our project that will serve to\nhelp us configure Tailwind in our project:</li>\n</ol>\n<h4>tailwind.config.js</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"js\" data-theme=\"github-dark\"><code data-language=\"js\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#79B8FF\">module</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#79B8FF\">exports</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    darkMode: </span><span style=\"color:#9ECBFF\">'class'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#6A737D\">// or 'media' or 'class'</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">};</span></span></code></pre></figure>\n<p>There are a plethora of configuration options that Tailwind offers to further customize how you're using it within a\nproject (production build optimization, extending themes, adding custom fonts and colors, etc.), but for our purpose, we\nonly care about telling Tailwind that we'll be using dark mode in our application.</p>\n<p>In the above configuration, by telling Tailwind to use the option <code>darkMode: 'class'</code>, we're telling the library to\napply dark mode variants when it detects the <code>dark</code> class utility in the class list at some node near the root of the\nDOM tree (in our case, either the <code>body</code> or <code>html</code> tag). Our approach to adding a dark mode toggle will then involve\nwriting the code to dynamically update/remove this <code>dark</code> class utility from the class list on the <code>html</code> tag as we\nclick the toggle switch that initiates flipping between dark/light mode.</p>\n<p>You can see this in action here on the blog by opening up your browser's developer tools and inspecting the DOM. Looking\nat the <code>html</code> tag, you'll notice the <code>dark</code> class being added, then removed, when you toggle the dark mode switch in the\nnavbar.</p>\n<p>With our Tailwind setup ceremony out of the way, let's start dark mode-ifying our application.</p>\n<h2>Adding a dark mode service</h2>\n<p>To help us facilitate toggling dark mode in our application, let's add an injectable singleton service that will be\nresponsible for enabling/disabling dark mode styles in our markup. Let's run the service schematic to generate said\nservice:</p>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"shell\" data-theme=\"github-dark\"><code data-language=\"shell\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B392F0\">ng</span><span style=\"color:#9ECBFF\"> g</span><span style=\"color:#9ECBFF\"> service</span><span style=\"color:#9ECBFF\"> services/dark-mode</span></span></code></pre></figure>\n<p>With our <code>dark-mode.service.ts</code> scaffolded out for us, let's go ahead and add some code to allow us to perform the\nnecessary DOM updates that Tailwind looks for when determining which style variants to apply:</p>\n<h4>dark-mode.service.ts</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"ts\" data-theme=\"github-dark\"><code data-language=\"ts\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { Injectable, OnDestroy } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> '@angular/core'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { BehaviorSubject } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> 'rxjs'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> DARK_MODE_ENABLED_KEY</span><span style=\"color:#F97583\"> =</span><span style=\"color:#9ECBFF\"> 'darkModeEnabled'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> ENABLED_VALUE</span><span style=\"color:#F97583\"> =</span><span style=\"color:#9ECBFF\"> 'true'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> NOT_ENABLED_VALUE</span><span style=\"color:#F97583\"> =</span><span style=\"color:#9ECBFF\"> 'false'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">@</span><span style=\"color:#B392F0\">Injectable</span><span style=\"color:#E1E4E8\">({</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    providedIn: </span><span style=\"color:#9ECBFF\">'root'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">})</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> class</span><span style=\"color:#B392F0\"> DarkModeService</span><span style=\"color:#F97583\"> implements</span><span style=\"color:#B392F0\"> OnDestroy</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAB70\">    darkModeEnabled$</span><span style=\"color:#F97583\"> =</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> BehaviorSubject</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">false</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">    constructor</span><span style=\"color:#E1E4E8\">() {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">        this</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">setCurrentState</span><span style=\"color:#E1E4E8\">();</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">        this</span><span style=\"color:#E1E4E8\">.</span><span style=\"color:#B392F0\">updateLocalStorageOnStateChange</span><span style=\"color:#E1E4E8\">();</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B392F0\">    ngOnDestroy</span><span style=\"color:#E1E4E8\">()</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">        this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">complete</span><span style=\"color:#E1E4E8\">();</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B392F0\">    toggleDarkMode</span><span style=\"color:#E1E4E8\">()</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> currentValue</span><span style=\"color:#F97583\"> =</span><span style=\"color:#79B8FF\"> this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.value;</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">        this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">next</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">!</span><span style=\"color:#E1E4E8\">currentValue);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">    private</span><span style=\"color:#B392F0\"> setCurrentState</span><span style=\"color:#E1E4E8\">()</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> currentValue</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> localStorage.</span><span style=\"color:#B392F0\">getItem</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">DARK_MODE_ENABLED_KEY</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> htmlTag</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> document.</span><span style=\"color:#B392F0\">getElementsByTagName</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'html'</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">item</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">0</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> classList</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> htmlTag?.classList;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\"> (currentValue </span><span style=\"color:#F97583\">===</span><span style=\"color:#79B8FF\"> ENABLED_VALUE</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">            this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">next</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">true</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">            classList?.</span><span style=\"color:#B392F0\">add</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        } </span><span style=\"color:#F97583\">else</span><span style=\"color:#F97583\"> if</span><span style=\"color:#E1E4E8\"> (currentValue </span><span style=\"color:#F97583\">===</span><span style=\"color:#79B8FF\"> NOT_ENABLED_VALUE</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">            this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">next</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">false</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">            classList?.</span><span style=\"color:#B392F0\">remove</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        }</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">    private</span><span style=\"color:#B392F0\"> updateLocalStorageOnStateChange</span><span style=\"color:#E1E4E8\">()</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">        this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">subscribe</span><span style=\"color:#E1E4E8\">((</span><span style=\"color:#FFAB70\">enabled</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">            const</span><span style=\"color:#79B8FF\"> htmlTag</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> document.</span><span style=\"color:#B392F0\">getElementsByTagName</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'html'</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">item</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">0</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">            const</span><span style=\"color:#79B8FF\"> classList</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> htmlTag?.classList;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">            if</span><span style=\"color:#E1E4E8\"> (enabled) {</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">                localStorage.</span><span style=\"color:#B392F0\">setItem</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">DARK_MODE_ENABLED_KEY</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">'true'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">                classList?.</span><span style=\"color:#B392F0\">add</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">            } </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">                localStorage.</span><span style=\"color:#B392F0\">setItem</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">DARK_MODE_ENABLED_KEY</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">'false'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">                classList?.</span><span style=\"color:#B392F0\">remove</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">            }</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        });</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">}</span></span></code></pre></figure>\n<p>Let's break down the code above so we can get a better understanding of what this service is doing:</p>\n<ol>\n<li>\n<p>We expose a <code>BehaviorSubject</code> that serves as the source of truth holding the current state value determining if our\napplication is in dark mode. We could also hold this information in a more formalized stateful manner using a library\nlike <a href=\"https://ngrx.io/\">NgRx</a>, but a simple <code>BehaviorSubject</code> does the job for us here. For the purpose of this post,\nwe won't be doing anything with this information, but it might be useful if we need to do some dark mode specific\nlogic later on.</p>\n</li>\n<li>\n<p>Next, we construct our service by having it call two methods: <code>setCurrentState</code>\nand <code>updateLocalStorageOnStateChange</code>. Looking at the first method:</p>\n</li>\n</ol>\n<h4>setCurrentState()</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"ts\" data-theme=\"github-dark\"><code data-language=\"ts\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#E1E4E8\">private </span><span style=\"color:#B392F0\">setCurrentState</span><span style=\"color:#E1E4E8\">(): </span><span style=\"color:#F97583\">void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">  const</span><span style=\"color:#79B8FF\"> currentValue</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> localStorage.</span><span style=\"color:#B392F0\">getItem</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">DARK_MODE_ENABLED_KEY</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">  const</span><span style=\"color:#79B8FF\"> htmlTag</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> document.</span><span style=\"color:#B392F0\">getElementsByTagName</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'html'</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">item</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">0</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">  const</span><span style=\"color:#79B8FF\"> classList</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> htmlTag?.classList;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">  if</span><span style=\"color:#E1E4E8\"> (currentValue </span><span style=\"color:#F97583\">===</span><span style=\"color:#79B8FF\"> ENABLED_VALUE</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">    this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">next</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">true</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    classList?.</span><span style=\"color:#B392F0\">add</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">  } </span><span style=\"color:#F97583\">else</span><span style=\"color:#F97583\"> if</span><span style=\"color:#E1E4E8\"> (currentValue </span><span style=\"color:#F97583\">===</span><span style=\"color:#79B8FF\"> NOT_ENABLED_VALUE</span><span style=\"color:#E1E4E8\">) {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">    this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">next</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">false</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    classList?.</span><span style=\"color:#B392F0\">remove</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">  }</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">}</span></span></code></pre></figure>\n<p><code>setCurrentState</code> is responsible for reading the current dark mode value stored in local storage, either <code>true</code>\nor <code>false</code> identified by the <code>darkModeEnabled</code> key. Once it's value is read, we apply the correct class to the <code>html</code>\ntag depending on what the value is, either adding <code>dark</code> to the class list or removing it. We store the dark mode value\nin local storage to provide a bit of nice UX for our users so that when they refresh the page, or come back to site\nlater, their dark mode option they previously selected is persisted.</p>\n<p>Again, if you take a look at your browser's current local storage here on the blog, you'll see the <code>darkModeEnabled</code>\noption with your current selection. Refreshing the page will reapply which option you currently have selected. Neat!</p>\n<p>Looking at our second method, <code>updateLocalStorageOnStateChange</code>, let's break it down:</p>\n<h4>updateLocalStorageOnStateChange()</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"ts\" data-theme=\"github-dark\"><code data-language=\"ts\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#E1E4E8\">private </span><span style=\"color:#B392F0\">updateLocalStorageOnStateChange</span><span style=\"color:#E1E4E8\">(): </span><span style=\"color:#F97583\">void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">  this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">subscribe</span><span style=\"color:#E1E4E8\">((</span><span style=\"color:#FFAB70\">enabled</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">=></span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> htmlTag</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> document.</span><span style=\"color:#B392F0\">getElementsByTagName</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'html'</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">item</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">0</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> classList</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> htmlTag?.classList;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (enabled) {</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">      localStorage.</span><span style=\"color:#B392F0\">setItem</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">DARK_MODE_ENABLED_KEY</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">'true'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">      classList?.</span><span style=\"color:#B392F0\">add</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    } </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">      localStorage.</span><span style=\"color:#B392F0\">setItem</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#79B8FF\">DARK_MODE_ENABLED_KEY</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">'false'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">      classList?.</span><span style=\"color:#B392F0\">remove</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'dark'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">  });</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">}</span></span></code></pre></figure>\n<p><code>updateLocalStorageOnStateChange()</code>'s job is to observe and react to changes from our <code>darkModeEnabled$</code> subject and\ncorrectly apply the proper class - either adding <code>dark</code> or removing it from the class list of the <code>html</code> tag.</p>\n<ol start=\"3\">\n<li>We've registered a listener on our <code>darkModeEnabled$</code> subject, so we best do our developer duty by disposing of the\nlistener once this service is destroyed in the <code>ngOnDestroy()</code> lifecycle hook (it's a singleton, so it'll only be\ncalled on application destruction):</li>\n</ol>\n<h4>ngOnDestroy()</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"ts\" data-theme=\"github-dark\"><code data-language=\"ts\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B392F0\">ngOnDestroy</span><span style=\"color:#E1E4E8\">(): </span><span style=\"color:#F97583\">void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">  this</span><span style=\"color:#E1E4E8\">.darkModeEnabled$.</span><span style=\"color:#B392F0\">complete</span><span style=\"color:#E1E4E8\">();</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">}</span></span></code></pre></figure>\n<ol start=\"4\">\n<li>Lastly, we add an expose a <code>toggleDarkMode()</code> method that, when called, simply flips the dark mode enabled value.</li>\n</ol>\n<h2>Using our dark mode service in a component</h2>\n<p>With the heavy lifting of applying/removing dark mode in our application out of the way, let's go ahead and create a\nsimple component with just a single Tailwind-styled button. Let's run the following schematic:</p>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"shell\" data-theme=\"github-dark\"><code data-language=\"shell\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#B392F0\">ng</span><span style=\"color:#9ECBFF\"> g</span><span style=\"color:#9ECBFF\"> component</span><span style=\"color:#9ECBFF\"> components/theme-toggle</span></span></code></pre></figure>\n<p>Once our component has been created, let's remove the <code>theme-toggle.component.css</code> file as we won't be needing any\ncustom CSS as Tailwind provides just about everything we need in terms of CSS utilities.</p>\n<p>In our <code>theme-toggle.component.ts</code>, let's update the component with a bit of code to bring in our dark mode service and\nsetup a click handler to toggle setting dark mode on our markup:</p>\n<h4>theme-toggle.component.ts</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"ts\" data-theme=\"github-dark\"><code data-language=\"ts\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { Component, OnDestroy, OnInit } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> '@angular/core'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { Subject } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> 'rxjs'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { takeUntil } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> 'rxjs/operators'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> { DarkModeService } </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> '../../services/dark-mode/dark-mode.service'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">@</span><span style=\"color:#B392F0\">Component</span><span style=\"color:#E1E4E8\">({</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    selector: </span><span style=\"color:#9ECBFF\">'joey-mckenzie-io-images-samples-theme-toggle'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    templateUrl: </span><span style=\"color:#9ECBFF\">'./theme-toggle.component.html'</span><span style=\"color:#E1E4E8\">,</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">})</span></span>\n<span data-line=\"\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> class</span><span style=\"color:#B392F0\"> ThemeToggleComponent</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#FFAB70\">    darkModeEnabled$</span><span style=\"color:#F97583\"> =</span><span style=\"color:#79B8FF\"> this</span><span style=\"color:#E1E4E8\">.darkModeService.darkModeEnabled$;</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#F97583\">    constructor</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">private</span><span style=\"color:#FFAB70\"> darkModeService</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> DarkModeService</span><span style=\"color:#E1E4E8\">) {}</span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#B392F0\">    toggleDarkMode</span><span style=\"color:#E1E4E8\">()</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> void</span><span style=\"color:#E1E4E8\"> {</span></span>\n<span data-line=\"\"><span style=\"color:#79B8FF\">        this</span><span style=\"color:#E1E4E8\">.darkModeService.</span><span style=\"color:#B392F0\">toggleDarkMode</span><span style=\"color:#E1E4E8\">();</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    }</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">}</span></span></code></pre></figure>\n<p>Our component code exposes a single method to interact with our dark mode service from the template. With our component\ncode in place, let's add some simple markup with just a single button that will handle toggling modes:</p>\n<h4>theme-toggle.component.html</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"html\" data-theme=\"github-dark\"><code data-language=\"html\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#85E89D\">div</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"flex min-h-screen flex-col items-center justify-center gap-y-4\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">button</span></span>\n<span data-line=\"\"><span style=\"color:#B392F0\">        (click)</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"toggleDarkMode()\"</span></span>\n<span data-line=\"\"><span style=\"color:#B392F0\">        id</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"dark-mode-toggle\"</span></span>\n<span data-line=\"\"><span style=\"color:#B392F0\">        class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700 dark:bg-blue-800 dark:text-blue-400 dark:hover:bg-blue-900\"</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    ></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        Toggle</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;/</span><span style=\"color:#85E89D\">button</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">p</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"text-black dark:text-white\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        Dark mode enabled: {{ (darkModeEnabled$ | async) === true }}</span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;/</span><span style=\"color:#85E89D\">p</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">&#x3C;/</span><span style=\"color:#85E89D\">div</span><span style=\"color:#E1E4E8\">></span></span></code></pre></figure>\n<p>With the markup above, all we should see now when we run our application is a single button in the middle of the page (\nmake sure you add our component selector to <code>app.component.html</code>).</p>\n<p>In our class list, you'll notice a few classes prefixed with <code>dark:</code>. This is how we tell Tailwind to apply the dark\nmode class variant when it detects <code>dark</code> in the class list higher up the DOM chain. We can also apply dark mode\nvariants to pseudo-selectors as well as we see with the dark mode variant on our <code>hover:</code> selector. Pretty cool!</p>\n<p>One last change we'll make is in our <code>index.html</code> root markup file to apply background colors as we toggle modes:</p>\n<h4>index.html</h4>\n<figure data-rehype-pretty-code-figure=\"\"><pre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"html\" data-theme=\"github-dark\"><code data-language=\"html\" data-theme=\"github-dark\" style=\"display: grid;\"><span data-line=\"\"><span style=\"color:#E1E4E8\">&#x3C;!</span><span style=\"color:#85E89D\">doctype</span><span style=\"color:#B392F0\"> html</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">&#x3C;</span><span style=\"color:#85E89D\">html</span><span style=\"color:#B392F0\"> lang</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"en\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">head</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">meta</span><span style=\"color:#B392F0\"> charset</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"utf-8\"</span><span style=\"color:#E1E4E8\"> /></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">title</span><span style=\"color:#E1E4E8\">>TailwindDarkMode&#x3C;/</span><span style=\"color:#85E89D\">title</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">base</span><span style=\"color:#B392F0\"> href</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"/\"</span><span style=\"color:#E1E4E8\"> /></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">meta</span><span style=\"color:#B392F0\"> name</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"viewport\"</span><span style=\"color:#B392F0\"> content</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"width=device-width, initial-scale=1\"</span><span style=\"color:#E1E4E8\"> /></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">link</span><span style=\"color:#B392F0\"> rel</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"icon\"</span><span style=\"color:#B392F0\"> type</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"image/x-icon\"</span><span style=\"color:#B392F0\"> href</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"favicon.ico\"</span><span style=\"color:#E1E4E8\"> /></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;/</span><span style=\"color:#85E89D\">head</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"> </span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;</span><span style=\"color:#85E89D\">body</span><span style=\"color:#B392F0\"> class</span><span style=\"color:#E1E4E8\">=</span><span style=\"color:#9ECBFF\">\"bg-white dark:bg-black\"</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">        &#x3C;</span><span style=\"color:#85E89D\">joey-mckenzie-io-blog-samples-root</span><span style=\"color:#E1E4E8\">>&#x3C;/</span><span style=\"color:#85E89D\">joey-mckenzie-io-blog-samples-root</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">    &#x3C;/</span><span style=\"color:#85E89D\">body</span><span style=\"color:#E1E4E8\">></span></span>\n<span data-line=\"\"><span style=\"color:#E1E4E8\">&#x3C;/</span><span style=\"color:#85E89D\">html</span><span style=\"color:#E1E4E8\">></span></span></code></pre></figure>\n<p>In our <code>body</code> tag, we add some background colors corresponding to which mode we're currently in. With everything\nstrapped together, if we fire up our application and navigate to <code>localhost:4200</code>, we'll be able to see our masterpiece\nin action:</p>\n<p><a href=\"/images/tailwind-dark-mode/dark-mode-toggle.webm\">Tailwind dark mode toggle example</a></p>\n<p>With dev tools open, you'll see the class list on the <code>html</code> tag update each time we click the button, as well as seeing\nthe value updated in local storage. If we refresh the page as well, we'll keep our dark mode in tact if we have that\noption selected before reloading!</p>\n<p>As always, take a look at\nthe <a href=\"https://github.com/JoeyMckenzie/joey-mckenzie-io-blog-samples/tree/main/apps/tailwind-dark-mode\">example code</a> for\nreference and let me know if you have any suggestions for a different implementation.</p>\n<p>Happy dark mode-ing, friends!</p>"
  },
  "_id": "2021/implementing-tailwind-dark-mode-in-angular.md",
  "_raw": {
    "sourceFilePath": "2021/implementing-tailwind-dark-mode-in-angular.md",
    "sourceFileName": "implementing-tailwind-dark-mode-in-angular.md",
    "sourceFileDir": "2021",
    "contentType": "markdown",
    "flattenedPath": "2021/implementing-tailwind-dark-mode-in-angular"
  },
  "type": "Post",
  "url": "/blog/2021/implementing-tailwind-dark-mode-in-angular"
}