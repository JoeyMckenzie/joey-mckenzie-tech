---
import { getCurrentlyListeningTo } from '@/lib/spotify';
import ListeningTo from './ListeningTo.astro';
import PoweredBy from './PoweredBy.astro';
import Socials from './Socials.astro';
import NotCurrentlyListening from './NotCurrentlyListening.astro';

const listeningTo = await getCurrentlyListeningTo();
---

<footer
  class="mx-auto flex max-w-4xl flex-col py-12 px-6 md:flex-row md:items-center md:justify-between lg:px-8"
>
  <Socials />
  {
    listeningTo && (
      <ListeningTo
        albumImageSrc={listeningTo.albumImage.url}
        artist={listeningTo.artist}
        href={listeningTo.href}
        trackTitle={listeningTo.trackTitle}
      />
    )
  }
  {!listeningTo && <NotCurrentlyListening />}
  <PoweredBy />
</footer>
